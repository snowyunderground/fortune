<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>SNOWY UNDER OMIKUJI</title>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
  <style>
    body {
      background-color: #000;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    img {
      max-width: 100%;
    }
    button, a {
      margin: 10px;
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #musicButton, #shareButton, #saveButton {
      display: none;
      background-color: #444;
      color: #fff;
      text-decoration: none;
    }
    #resultWrapper.hidden {
      display: none;
    }
    #resultWrapper {
      background-image: url('https://lh3.googleusercontent.com/pw/AP1GczNm9JylCYLkNOoIkW-5GewwxqMTW_LEwwrLkZ9ufEiaxWhOJVKfvN04uPs9CbbCzgSUPZGPfJCgW4cAVDLcw0D4YzSRLtAAndRUOQjvtV1ffEjXKxZH=w2400');
      background-size: cover;
      background-position: center;
      border-radius: 12px;
      padding: 40px 20px;
      position: relative;
      max-width: 600px;
      margin: 20px auto;
      color: white;
    }
  </style>
</head>
<body>
  <!-- タイトル画像 -->
  <img id="titleImage" src="https://lh3.googleusercontent.com/pw/AP1GczOH_tNjrElU_ZsQZ0SzL-Yds4-ETI5KVno2cHEYhOm_hCJnkyPFUCQOr-b5dA_evXAjyZ2YEHCcG-ZzgxJWEJFBQgG5gdcCsKn3rAazDLTsHywI5my9=w2400" alt="SNOWY UNDER OMIKUJI" />

  <h1>SNOWY UNDER OMIKUJI</h1>
  <button onclick="drawFortune()">おみくじを引いてみる</button>

  <div id="resultWrapper" class="hidden">
    <div id="result">
      <p id="fortuneText" style="font-size: 24px; font-weight: bold;"></p>
      <p id="numberText" style="font-size: 20px; margin-bottom: 20px;"></p>
    </div>
  </div>

  <a id="musicButton" href="#" target="_blank">楽曲リンク</a>
  <a id="shareButton" href="#" target="_blank" rel="noopener noreferrer">Xでシェア</a>
  <button id="saveButton" onclick="saveResult()">📷 結果画面を保存</button>

  <script>
    const fortunes = [
     "新世界の神になれる日",
      "ごはんがうんまい日",
      "誰もが振り向くセクシーボディな日",
      “世界で一番凡人な日",
      "チーズ牛丼食べてそうって言われる日",
      "コンビニのくじが当たりそうな日(当たるとは言ってない)”,
      "JI・GO・KU(明日に期待)",
    ];

    const numbers = [
      "HONEY(PINK TAPIR収録)", 
　   "卒業(PINK TAPIR収録)",
      "Sleepy hollow(PINK TAPIR収録)",
      "Pretend not to see(PINK TAPIR収録)", 
      "the sad man(PINK TAPIR収録)", 
　  "忘れて下さい(忘れて下さい収録)",
      "極彩色の灰世界で(忘れて下さい収録)",
      "とんがり帽子と苺ケーキ(忘れて下さい収録)", 
      "THE ONE(PINK TAPIR収録)", 
      "蝶とマリー(忘れて下さい収録）", 
      "Sink in white(Sink in white収録)", 
　  "ラストクリスマス(Sink in white収録)",
      "Gravity of luv(Sink in white収録)",
      "月明かりと弱虫(Sink in white収録)", 
      "最愛と最哀(Sink in white収録)", 
      "ゴースト(GHOSTNOTE収録）", 
      "Vestiges(GHOSTNOTE収録)", 
　　"STAY(GHOSTNOTE収録)",
      "遺言(遺言収録)",
      "百年桜(PINK TAPIR収録)", 
      "さくら(PINK TAPIR収録)", 
      "ゴースト(GHOSTNOTE収録）", 
      "ロミ夫とジュリ恵さん(GHOSTNOTE収録）", 
      "秒_沁(GHOSTNOTE収録）", 
      "Ultra Hyper Soul(GHOSTNOTE収録）", 
      "LONGINUS(GHOSTNOTE収録）", 
      "ホーリーグレイル・シンドローム(GHOSTNOTE収録）", 
      "Vestiges(GHOSTNOTE収録）", 
      "STAY(GHOSTNOTE収録）", 
      "blue on blue(blue on blue収録)", 
      "マリンスノウ(blue on blue収録)", 
      "シネマチック・ブギー・ナイト(blue on blue収録)", 
      "透明な花(blue on blue収録)", 
      "Spider’s Aim(blue on blue収録)", 
      "Voyage(blue on blue収録)", 
      "陽炎(blue on blue収録)", 
      "Hello,Crappy World(blue on blue収録)", 
      "DRAGON WARS あわよくば伝説へ(blue on blue収録)", 
      "No,Summerdays(blue on blue収録)", 
      "君に会いに行くよ(blue on blue収録)", 
      "Violet fear(Violet fear収録)", 
      "ハッピィデイズ(Violet fear収録)", 
      "りせっとぼたん(Violet fear収録)", 
      "ヘヴンズアンブレラ(Violet fear収録)", 
      "Bloody Love Song(Violet fear収録)", 
      "Midnight Pumpkin Drive(Violet fear収録)", 
      "楓恋(Violet fear収録)", 
      "シオン(Violet fear収録)", 
      "Between the sky and you(Violet fear収録)", 
      "embers(Violet fear収録)",
      "Chocolate Discord(Chocolate Discord収録)", 
      "21g(Chocolate Discord収録)", 
      "Theory of evolution(Chocolate Discord収録)", 
      "Brain in a vat(Chocolate Discord収録)", 
      "regret(Chocolate Discord収録)", 
      "52ヘルツの鯨(Chocolate Discord収録)", 
      "Wizard(Chocolate Discord収録)", 
      "THE INNER BEAST(Singer in the dark収録)", 
      "世界に一つだけの花(Singer in the dark収録)", 
      "シーソーゲーム(Singer in the dark収録)", 
      "眠れる森(Singer in the dark収録)", 
      "あとがき(Singer in the dark収録)", 
      "Alchemy(Singer in the dark収録)", 
      "メガロドン(Singer in the dark収録)", 
      "プラナリア(Singer in the dark収録)", 
      "パラダイス・ロスト(Singer in the dark収録)", 
      "マスカレード(Singer in the dark収録)", 
      "紫陽花と雨の夜(Singer in the dark収録)", 
      "小規模な愛の唄(Singer in the dark収録)", 
      "惨獄死(Singer in the dark収録)", 
      "バナナはおやつに入りません(Singer in the dark収録)", 
      "真夜中のサーカス(THE END IS THE BEGINNING収録)", 
      "Another Cosmos(THE END IS THE BEGINNING収録)", 
      "シルバニア家族(THE END IS THE BEGINNING収録)", 
      "evergreen(THE END IS THE BEGINNING収録)", 
      "Eden for automata(THE END IS THE BEGINNING収録)", 
      "GUILTY(THE END IS THE BEGINNING収録)", 
      "エンドロール(THE END IS THE BEGINNING収録)", 
      "forbbiden flame(THE END IS THE BEGINNING収録)", 
      "Little adventure in my room(THE END IS THE BEGINNING収録)", 
      "Magnetar(THE END IS THE BEGINNING収録)", 
      "vlinder(THE END IS THE BEGINNING収録)", 
      "灰とダイヤモンド(THE END IS THE BEGINNING収録)", 
      "ないものねだり(THE END IS THE BEGINNING収録)", 
      "Pray(THE END IS THE BEGINNING収録)", 
      "MUSEUM(MUSEUM収録)", 
      "落日(MUSEUM収録)", 
      "桃色MURDER SHOW(MUSEUM収録)", 
      "心葬の月(MUSEUM収録)", 
      "溺愛本能ステータス(MUSEUM収録)", 
      "負け猫は遠吠える(MUSEUM収録)", 
      "緋い絲(MUSEUM収録)", 
      "殉職トリックスター(MUSEUM収録)", 
      "イノセントワールド(MUSEUM収録)", 
      "離魂届(MUSEUM収録)", 
      "クリスマスイヴの夜はお父さんお母さんが部屋に入って来ても寝たふりが好ましいと思います(MUSEUM収録)", 
      "極悪御法度天誅殺(MUSEUM収録)", 
      "バタフライ・エフェクト(MUSEUM Ⅱ収録)", 
      "毒(MUSEUM Ⅱ収録)", 
      "苺センチメンタル(MUSEUM Ⅱ収録)", 
      "SUPER CHORD(MUSEUM Ⅱ収録)", 
      "六本木心中(MUSEUM Ⅱ収録)", 
      "終着駅(MUSEUM Ⅱ収録)", 
      "エル(MUSEUM Ⅱ収録)", 
      "君が望む永遠と僕が欲しかった唯一の倖せ(MUSEUM Ⅱ収録)", 
      "Smiley killer tune Z(MUSEUM Ⅱ収録)", 
      "課長風月(MUSEUM Ⅱ収録)", 
      "星屑セレネイド(MUSEUM Ⅱ収録)", 
      "雪の花(MUSEUM Ⅱ収録)", 
      "滅殺興行八九三式(MUSEUM Ⅱ収録)", 
      "ray not disappear(MUSEUM Ⅱ収録)", 
      "天使(MUSEUM Ⅱ収録)", 
      "ジャック・スパ郎(heavenly!heavenly!heavenly!収録)", 
      "heavenly(heavenly!heavenly!heavenly!収録)", 
      "スピカ(heavenly!heavenly!heavenly!収録)", 
      "北斗の件(heavenly!heavenly!heavenly!収録)", 
      "鎮痛薬(heavenly!heavenly!heavenly!収録)", 
      "サイコパる(heavenly!heavenly!heavenly!収録)", 
      "GOLD HAZE(heavenly!heavenly!heavenly!収録)", 
      "讃美歌(heavenly!heavenly!heavenly!収録)", 
      "くたくたのブランケット(heavenly!heavenly!heavenly!収録)", 
      "東京懐色ラプソディー(heavenly!heavenly!heavenly!収録)", 
      "PAINS LABYRINTH(ORIGINAL SIN収録)", 
      "堕天(ORIGINAL SIN収録)", 
      "LAND MINE GIRL(ORIGINAL SIN収録)", 
      "Necessary?(ORIGINAL SIN収録)", 
      "惑(ORIGINAL SIN収録)", 
      "ドッペる(ORIGINAL SIN収録)", 
      "too young to die(ORIGINAL SIN収録)", 
      "Reincarnation(ORIGINAL SIN収録)", 
      "mosquitone(ORIGINAL SIN収録)", 
      "太陽(ORIGINAL SIN収録)", 
      "BeAUTIFUL MInd people(TOO HIGH DIMENSION収録)", 
      "Orange(TOO HIGH DIMENSION収録)", 
      "Insect invasion(TOO HIGH DIMENSION収録)", 
      "セイレーン(TOO HIGH DIMENSION収録)", 
      "エリーゼのために(TOO HIGH DIMENSION収録)", 
      "熱帯夜(TOO HIGH DIMENSION収録)", 
      "EPHEMERAL KINGDOM(TOO HIGH DIMENSION収録)", 
      "三日月(TOO HIGH DIMENSION収録)", 
      "Allergie(TOO HIGH DIMENSION収録)", 
      "Mole(TOO HIGH DIMENSION収録)", 
      "CK.L(Still life goes on収録)", 
      "ハリネズミ(Still life goes on収録)", 
      "残り香(Still life goes on収録)", 
      "Dead carpet(Still life goes on収録)", 
      "オルフェ(Still life goes on収録)", 
      "Wednesday(Still life goes on収録)", 
      "nightmare(Still life goes on収録)", 
      "atmosphere(Still life goes on収録)", 
      "etude(Still life goes on収録)", 
      "Hermit crab(Still life goes on収録)", 
      "Life goes on(Still life goes on収録)", 
      "ナイトライダー(TAMED SPEED収録)", 
      "Door(TAMED SPEED収録)", 
      "impurities(TAMED SPEED収録)", 
      "Movin'on(TAMED SPEED収録)", 
      "rainy blues(TAMED SPEED収録)", 
      "to the next(TAMED SPEED収録)", 
      "ラフレシア(TAMED SPEED収録)", 
      "ホームシック(TAMED SPEED収録)",
      "ヒロイン(TAMED SPEED収録)", 
      "Sign(TAMED SPEED収録)", 
      "タイガー＆ドラゴン(Inferior to animals収録)", 
      "ポケットの魔物(Inferior to animals収録)",
      "Delay(Inferior to animals収録)", 
      "Shallow scheme(Inferior to animals収録)", 
       "タイガー＆ドラゴン(Inferior to animals収録)", 
      "ポケットの魔物(Inferior to animals収録)",
      "Delay(Inferior to animals収録)", 
      "Wolves howling(Inferior to animals収録)", 
      "ORNAMENTAL(Inferior to animals収録)", 
      "hyena(Inferior to animals収録)",
      "aquarium(Inferior to animals収録)", 
      "the Thinking dead(Inferior to animals収録)",
      "Shallow scheme(Inferior to animals収録)", 
      "惑星(Inferior to animals収録)", 
      "HELLy Christmas(HELLy Christmas収録)", 
      "Maze walker(FAIRYTALE ADDICTION収録)", 
      "STRANGE LAND(FAIRYTALE ADDICTION収録)", 
      "Little Red Riding Hood(FAIRYTALE ADDICTION収録)", 
      "The Wicked Witch of the West(FAIRYTALE ADDICTION収録)", 
      "True Lies(FAIRYTALE ADDICTION収録)", 
      "NEVERLAND(FAIRYTALE ADDICTION収録)", 
      "愛のままにわがままに僕は君だけを傷つけちゃうかもしれない(FAIRYTALE ADDICTION収録)", 
      "Mr.Invincible(FAIRYTALE ADDICTION収録)", 
      "諸刃の剣(FAIRYTALE ADDICTION収録)", 
      "ヒカリトカゲ(FAIRYTALE ADDICTION収録)", 
      "Hopeless town(Hopeless town収録)", 
      "BADMAN(Hopeless town収録)", 
      "GODS HAND(Hopeless town収録)", 
      "Crack(Hopeless town収録)", 
      "darker than darkness(Hopeless town収録)", 
      "monopoly(Hopeless town収録)", 
      "Know your limits(Hopeless town収録)", 
      "爆ぜる(Hopeless town収録)", 
      "怪物(Hopeless town収録)", 
      "Across the way(Hopeless town収録)",

    ];

    function drawFortune() {
      const fortune = fortunes[Math.floor(Math.random() * fortunes.length)];
      const number = numbers[Math.floor(Math.random() * numbers.length)];

      document.getElementById("fortuneText").textContent = "今日の運勢: " + fortune;
      document.getElementById("numberText").textContent = "ラッキーソング: " + number;

      const musicButton = document.getElementById("musicButton");
      const shareButton = document.getElementById("shareButton");
      const saveButton = document.getElementById("saveButton");

      // 音楽リンク
      if (number.includes("ORIGINAL SIN")) {
        musicButton.href = "https://linkco.re/8tdYfQUB";
      } else if (number.includes("TOO HIGH DIMENSION")) {
        musicButton.href = "https://linkco.re/4NrfCgbA";
      } else if (number.includes("Still life goes on")) {
        musicButton.href = "https://linkco.re/PHQEBCGH";
      } else if (number.includes("TAMED SPEED")) {
        musicButton.href = "https://linkco.re/C0Cg6F1U";
      } else if (number.includes("Inferior to animals")) {
        musicButton.href = "https://linkco.re/BXT9YsAx";
      } else if (number.includes("HELLy Christmas")) {
        musicButton.href = "https://linkco.re/DEfMznyf";
      } else if (number.includes("FAIRYTALE ADDICTION")) {
        musicButton.href = "https://linkco.re/qRa87Tyv";
      } else if (number.includes("Hopeless town")) {
        musicButton.href = "https://linkco.re/GEs0DeME";
      } else if (number.includes("Sink in white")) {
        musicButton.href = "https://linkco.re/PzmVnz62";
      } else if (number.includes("忘れて下さい")) {
        musicButton.href = "https://linkco.re/UHepNv67";
      } else if (number.includes("遺言")) {
        musicButton.href = "https://linkco.re/880faBsu";
      } else if (number.includes("PINK TAPIR")) {
        musicButton.href = "https://linkco.re/CfZ2AMq3";
      } else if (number.includes("GHOSTNOTE")) {
        musicButton.href = "https://linkco.re/fcxAVvX8";
      } else if (number.includes("blue on blue")) {
        musicButton.href = "https://linkco.re/t13YVHDp";
      } else if (number.includes("violet fear")) {
        musicButton.href = "https://linkco.re/RqHVxVaX";
      } else if (number.includes("MUSEUM")) {
        musicButton.href = "https://linkco.re/vESsScZr";
      } else if (number.includes("Chocolate Discord")) {
        musicButton.href = "https://linkco.re/X3YByyCG";
      } else if (number.includes("Singer in the dark")) {
        musicButton.href = "https://linkco.re/MnEA7Ne0";
      } else if (number.includes("THE END IS THE BEGINNING")) {
        musicButton.href = "https://linkco.re/s3zFGZRD";
      } else if (number.includes("MUSEUM Ⅱ")) {
        musicButton.href = "https://linkco.re/uhG4qGe8";
      } else if (number.includes("heavenly!heavenly!heavenly!")) {
        musicButton.href = "https://linkco.re/ysm2QFub";
      } else {
        musicButton.style.display = "none";
      }

      musicButton.style.display = "inline-block";
      shareButton.style.display = "inline-block";
      saveButton.style.display = "inline-block";

      // シェアリンク
      const shareText =
        `SNOWY UNDER OMIKUJI結果🎲\n【運勢】${fortune}\n【ラッキーソング】${number}\nSNOWYおみくじ → https://snowyunderground.github.io/fortune/\n公式サイト → https://snowy-underground.bitfan.id\n#SNOWYUNDER #おみくじ`;
      const tweetText = encodeURIComponent(shareText);
      shareButton.href = `https://twitter.com/intent/tweet?text=${tweetText}`;

      // 結果表示
      document.getElementById("resultWrapper").classList.remove("hidden");

      // 5時制限（コメントアウト中）
      // localStorage.setItem('lastFortuneDate', new Date().toISOString());
    }

    function saveResult() {
      const wrapper = document.createElement("div");
      wrapper.style.background = "#000";
      wrapper.style.padding = "20px";
      wrapper.style.textAlign = "center";

      const titleImg = document.getElementById("titleImage").cloneNode(true);
      titleImg.style.maxWidth = "100%";
      titleImg.style.marginBottom = "10px";

      const resultClone = document.getElementById("resultWrapper").cloneNode(true);
      resultClone.classList.remove("hidden");

      wrapper.appendChild(titleImg);
      wrapper.appendChild(resultClone);

      document.body.appendChild(wrapper);
      html2canvas(wrapper, { useCORS: true }).then(canvas => {
        const link = document.createElement("a");
        link.href = canvas.toDataURL("image/png");
        link.download = "fortune_result.png";
        link.click();
        document.body.removeChild(wrapper);
        alert("画像を保存しました！画像を添えて投稿してね📷✨");
      });
    }
  </script>
</body>
</html>
